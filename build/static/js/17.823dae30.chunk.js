(this.webpackJsonpamongusfinance=this.webpackJsonpamongusfinance||[]).push([[17],{283:function(e,t,a){},558:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a(0),i=a(142),c=a.n(i),o=a(153),l=a(194),d=a(107),r=a(20),u=a(33),h=a(154),m=a(108);a(283);class b extends s.Component{render(){return Object(n.jsxs)("div",{id:"content",children:[Object(n.jsxs)("label",{className:"menu__item-label_",children:["Account balance: ",window.web3.utils.fromWei(this.props.aufTokenBalance,"Ether")," AMONG"]}),Object(n.jsxs)("label",{className:"menu__item-label_",children:["Staking balance: ",window.web3.utils.fromWei(this.props.stakingBalance,"Ether")," AMONG"]}),Object(n.jsx)("div",{className:"menu__item-content",children:Object(n.jsxs)("div",{className:"menu__item-content",children:[Object(n.jsx)("label",{className:"menu__item-label__",children:"1. Approve $AMONG"}),Object(n.jsx)("div",{className:"menu__item-divider"}),Object(n.jsx)(d.a,{secondary:!0,type:"submit",className:"menu__item-button__",onClick:e=>{e.preventDefault(),this.props.approveTokens()},children:"approve"})]})}),Object(n.jsxs)("div",{className:"menu__item-content",children:[Object(n.jsx)("label",{className:"menu__item-label__",children:"2. Stake tokens"}),Object(n.jsx)("div",{className:"menu__item-divider"}),Object(n.jsxs)("form",{className:"menu__item-input",onSubmit:e=>{let t;e.preventDefault(),t=this.input.value,t=window.web3.utils.toBN(t),t=window.web3.utils.toWei(t,"Ether"),this.props.stakeTokens(t)},children:[Object(n.jsx)("input",{type:"text",ref:e=>{this.input=e},className:"input_",style:{width:"245px"},placeholder:"0",required:!0}),Object(n.jsx)(d.a,{secondary:!0,type:"submit",className:"menu__item-button_",children:"stake"})]})]}),Object(n.jsxs)("div",{className:"menu__item-content",children:[Object(n.jsx)("label",{className:"menu__item-label__",children:"3. Unstake all tokens"}),Object(n.jsx)("div",{className:"menu__item-divider"}),Object(n.jsx)(d.a,{secondary:!0,type:"submit",className:"menu__item-button__",onClick:e=>{e.preventDefault(),this.props.unstakeTokens()},children:"unstake"})]})]})}}var w=b;class k extends s.Component{async componentWillMount(){await this.loadWeb3(),await this.loadBlockchainData()}async loadBlockchainData(){const e=window.web3,t=await e.eth.getAccounts();this.setState({account:t[0]});const a=await e.eth.net.getId(),n=o.networks[a];if(n){const t=new e.eth.Contract(o.abi,n.address);this.setState({aufToken:t});let a=await t.methods.balanceOf(this.state.account).call();this.setState({aufTokenBalance:a.toString()})}else window.alert("AufToken contract not deployed to detected network.");const s=l.networks[a];if(s){const t=new e.eth.Contract(l.abi,s.address);this.setState({aufStaking:t});let a=await t.methods.stakingBalance(this.state.account).call();this.setState({stakingBalance:a.toString()})}else window.alert("AufStaking contract not deployed to detected network.");this.setState({loading:!1})}async loadWeb3(){window.ethereum?(window.web3=new c.a(window.ethereum),await window.ethereum.enable()):window.web3?window.web3=new c.a(window.web3.currentProvider):window.alert("Non-Ethereum browser detected. You should consider trying MetaMask!")}async approveTokens(){const e=window.web3,t=(await e.eth.getAccounts())[0],a=new e.eth.Contract(o.abi,"0xF841D292c1141cbF1460A1E2010916565a010cc8");await a.methods.approve("0x4929000a05e5B404B8BF3BaA088bE5042E8Ff99e","21000000000000000000000000").send({from:t}).on("transactionHash",(e=>{}))}constructor(e){super(e),this.stakeTokens=e=>{this.setState({loading:!0}),this.state.aufStaking.methods.stakeTokens(e).send({from:this.state.account}).on("transactionHash",(e=>{this.setState({loading:!1}),window.location.reload()}))},this.unstakeTokens=()=>{this.setState({loading:!0}),this.state.aufStaking.methods.unstakeTokens().send({from:this.state.account}).on("transactionHash",(e=>{this.setState({loading:!1}),window.location.reload()}))},this.state={account:"0x0",aufToken:{},aufStaking:{},aufTokenBalance:"0",stakingBalance:"0",loading:!0}}render(){let e,t=this.state.account,a=t.substr(0,6)+"..."+t.substr(38,4);return e=this.state.loading?Object(n.jsx)("p",{id:"loader",className:"text-center",children:"Loading..."}):Object(n.jsx)(w,{aufTokenBalance:this.state.aufTokenBalance,stakingBalance:this.state.stakingBalance,stakeTokens:this.stakeTokens,approveTokens:this.approveTokens,unstakeTokens:this.unstakeTokens,etheraddress1:this.state.account}),Object(n.jsxs)("section",{className:"menu",children:[Object(n.jsxs)(r.a,{children:[Object(n.jsx)("title",{children:"AmongUS Finance Staking"}),Object(n.jsx)("meta",{name:"description",content:"Blockchain ready recreation of the popular -Among Us- indie game. Powered by Decentralized Finance, non-custodial staking and Farming protocols"})]}),Object(n.jsx)(s.Suspense,{fallback:null,children:Object(n.jsx)(m.a,{})}),Object(n.jsxs)("div",{className:"menu__content",children:[Object(n.jsx)(h.a,{className:"menu__username3",placeholder:a,pattern:".{1,}",style:{width:"500px"},disabled:!0}),e]}),Object(n.jsx)(u.b,{to:"/menu",children:Object(n.jsx)(d.a,{className:"menu__nav-button",children:"back"})})]})}}t.default=k}}]);
//# sourceMappingURL=17.823dae30.chunk.js.map