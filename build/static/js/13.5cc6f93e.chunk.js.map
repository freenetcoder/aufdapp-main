{"version":3,"sources":["assets/models/lobby.glb","assets/models/skeld.glb","assets/models/astronaut.glb","assets/game/start.png","assets/game/customize.png","pages/Lobby/index.js"],"names":["Engine","lazy","Lobby","username","useAppContext","params","useRouteMatch","id","invalid","setInvalid","useState","loaded","setLoaded","inGame","setInGame","settings","setSettings","ready","prerender","stage","map","useEffect","subscribeToEvent","lobbies","lobbyExists","filter","lobby","sendEvent","to","rel","href","as","crossorigin","skeld","astronaut","start","customize","fallback"],"mappings":"mHAAe,QAA0B,mC,iCCA1B,QAA0B,mC,iCCA1B,QAA0B,uC,iCCA1B,QAA0B,mC,iCCA1B,QAA0B,uC,8ICYzC,MAAMA,EAASC,gBAAK,IAAM,uDA4DXC,UA1DD,KACZ,MAAM,SAAEC,GAAaC,eACf,OAAEC,GAAWC,eACb,GAAEC,GAAOF,GACRG,EAASC,GAAcC,oBAAUP,IAAaI,IAC9CI,EAAQC,GAAaF,oBAAS,IAC9BG,EAAQC,GAAaJ,sBACrBK,EAAUC,GAAeN,qBAC1BO,GAASC,KAAaP,EACtBQ,EAAQN,EAAM,OAAGE,QAAH,IAAGA,OAAH,EAAGA,EAAUK,IAAM,QAuBvC,OArBAC,qBAAU,KAeRC,YAAiB,aAdDC,IACd,MAAMC,EAAW,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAASE,QAAOC,GAASA,EAAMnB,KAAOA,IAAI,GAC9D,IAAKiB,EAAa,OAAOf,GAAW,GAEpCK,EAAUU,EAAYX,QACtBG,EAAYQ,EAAYT,UACxBH,GAAU,MASZU,YAAiB,eANA,EAAGT,SAAQE,eAC1BD,EAAUD,GACVG,EAAYD,MAMdY,YAAU,eACT,CAACpB,IAEAC,EAAgB,cAAC,IAAD,CAAUoB,GAAG,MAG/B,eAAC,WAAD,WACE,eAAC,IAAD,WACE,6DAAgCrB,KAChC,sBAAMsB,IAAI,WAAWC,KAAMJ,IAAOK,GAAG,QAAQC,YAAY,KACzD,sBAAMH,IAAI,WAAWC,KAAMG,IAAOF,GAAG,QAAQC,YAAY,KACzD,sBAAMH,IAAI,WAAWC,KAAMI,IAAWH,GAAG,QAAQC,YAAY,KAC7D,sBAAMH,IAAI,WAAWC,KAAMK,IAAOJ,GAAG,QAAQC,YAAY,KACzD,sBAAMH,IAAI,WAAWC,KAAMM,IAAWL,GAAG,QAAQC,YAAY,QAE7Df,IAAUJ,GACV,cAAC,WAAD,CAAUwB,SAAU,KAApB,SACE,cAACrC,EAAD,CAAQO,GAAIA,EAAIY,MAAOA,EAAOJ,SAAUA,MAG1CE,GAASJ,GACT,cAAC,WAAD,CAAUwB,SAAU,KAApB,SACE,cAACrC,EAAD,CAAQO,GAAIA,EAAIY,MAAK,OAAEJ,QAAF,IAAEA,OAAF,EAAEA,EAAUK,IAAKL,SAAUA","file":"static/js/13.5cc6f93e.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/lobby.bb1c9541.glb\";","export default __webpack_public_path__ + \"static/media/skeld.be7bc474.glb\";","export default __webpack_public_path__ + \"static/media/astronaut.734e993d.glb\";","export default __webpack_public_path__ + \"static/media/start.d6e1f12d.png\";","export default __webpack_public_path__ + \"static/media/customize.18633b56.png\";","import { lazy, useState, useEffect, Fragment, Suspense } from 'react';\nimport { Redirect, useRouteMatch } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\nimport { useAppContext } from 'hooks';\nimport { subscribeToEvent, sendEvent } from 'utils/socket';\nimport prerender from 'utils/prerender';\nimport lobby from 'assets/models/lobby.glb';\nimport skeld from 'assets/models/skeld.glb';\nimport astronaut from 'assets/models/astronaut.glb';\nimport start from 'assets/game/start.png';\nimport customize from 'assets/game/customize.png';\n\nconst Engine = lazy(() => import('components/Engine'));\n\nconst Lobby = () => {\n  const { username } = useAppContext();\n  const { params } = useRouteMatch();\n  const { id } = params;\n  const [invalid, setInvalid] = useState(!username || !id);\n  const [loaded, setLoaded] = useState(false);\n  const [inGame, setInGame] = useState();\n  const [settings, setSettings] = useState();\n  const ready = !prerender && loaded;\n  const stage = inGame ? settings?.map : 'lobby';\n\n  useEffect(() => {\n    const onPool = (lobbies) => {\n      const lobbyExists = lobbies?.filter(lobby => lobby.id === id)[0];\n      if (!lobbyExists) return setInvalid(true);\n\n      setInGame(lobbyExists.inGame);\n      setSettings(lobbyExists.settings);\n      setLoaded(true);\n    };\n\n    const onUpdate = ({ inGame, settings }) => {\n      setInGame(inGame);\n      setSettings(settings);\n    };\n\n    subscribeToEvent('lobbyPool', onPool);\n    subscribeToEvent('lobbyUpdate', onUpdate);\n\n    sendEvent('lobbyPool');\n  }, [id]);\n\n  if (invalid) return <Redirect to=\"/\" />;\n\n  return (\n    <Fragment>\n      <Helmet>\n        <title>AmongUs Finance | Lobby {id}</title>\n        <link rel=\"prefetch\" href={lobby} as=\"fetch\" crossorigin=\"\" />\n        <link rel=\"prefetch\" href={skeld} as=\"fetch\" crossorigin=\"\" />\n        <link rel=\"prefetch\" href={astronaut} as=\"fetch\" crossorigin=\"\" />\n        <link rel=\"prefetch\" href={start} as=\"fetch\" crossorigin=\"\" />\n        <link rel=\"prefetch\" href={customize} as=\"fetch\" crossorigin=\"\" />\n      </Helmet>\n      {(ready && !inGame) &&\n        <Suspense fallback={null}>\n          <Engine id={id} stage={stage} settings={settings} />\n        </Suspense>\n      }\n      {(ready && inGame) &&\n        <Suspense fallback={null}>\n          <Engine id={id} stage={settings?.map} settings={settings} />\n        </Suspense>\n      }\n    </Fragment>\n  );\n};\n\nexport default Lobby;\n"],"sourceRoot":""}